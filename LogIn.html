<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/logIn.css">
    <link rel="stylesheet" href="css/formulario.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="img/cupon-estrella.png" type="image/x-icon">
    <title>Log In</title>
</head>
<body>
    <div class="form-container">
        <img src="img/CM.png" alt="" class="logo-CM">
        <div class="formulario">
            <div class="head">
                <h2>Inicio de sesión</h2>
            </div>
            <div class="logIn">
                <form method="post" action="#">
                    <ul>
                        <li>
                            <span class="inicio"><i class="fa-solid fa-user"></i></span><input 
                            type="text" required class="text" placeholder="Usuario">
                        </li>
                        <li>
                            <span class="inicio"><i class="fa-solid fa-key"></i></span><input 
                            type="password" required class="text" placeholder="Contraseña">
                        </li>
                        <li>
                            <button class="boton">Iniciar sesión</button>
                        </li>
                    </ul>
                </form>
                <script type="module">
                    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
                    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
            
                    // Configuración de Firebase
                    const firebaseConfig = {
                        apiKey: "AIzaSyDZigv2X5_57XfBkfE4zb2R2GobZ90igVI",
                        authDomain: "proyectometodologias-2186a.firebaseapp.com",
                        projectId: "proyectometodologias-2186a",
                        storageBucket: "proyectometodologias-2186a.appspot.com",
                        messagingSenderId: "1035665597993",
                        appId: "1:1035665597993:web:fd75c9d15de9988b7a5e38"
                    };
            
                    // Inicializa Firebase
                    const app = initializeApp(firebaseConfig);
                    const auth = getAuth(app);
            
                    // Lógica de inicio de sesión
                    const loginForm = document.getElementById("loginForm");
            
                    loginForm.addEventListener("submit", (e) => {
                        e.preventDefault();
                        
                        const email = document.getElementById("email").value;
                        const password = document.getElementById("password").value;
            
                        signInWithEmailAndPassword(auth, email, password)
                            .then((userCredential) => {
                                // Inicio de sesión exitoso
                                alert("Inicio de sesión exitoso.");
                                location.assign("/CrearCatalogo.html"); // Redirige a la página correcta
                            })
                            .catch((error) => {
                                console.error("Error en el inicio de sesión:", error);
                                alert("Error: No se pudo iniciar sesión. Verifica tus credenciales.");
                            });
                    });
                </script>
            </div>
        </div>
    </div>
</body>
</html>